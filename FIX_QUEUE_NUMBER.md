# ุฅุตูุงุญ Queue Number - ุงูุชุตููุฑ ุจุนุฏ ุงูุฃุฑุดูุฉ

## ๐ ุงูุชุงุฑูุฎ: 13 ููููุจุฑ 2024

---

## ๐ **ุงููุดููุฉ:**

**ุจุนุฏ ุงูุฃุฑุดูุฉ:**
- โ Timeline ูุธูู
- โ Queue Number ูุณุชูุฑ ูู ุขุฎุฑ ุฑูู!

**ูุซุงู:**
1. ุฅุถุงูุฉ ูุฑูุถ ุฑูู 1 โ ุฃุฑุดูุฉ
2. ุฅุถุงูุฉ ูุฑูุถ ุฑูู 2 โ ุฃุฑุดูุฉ
3. ุฅุถุงูุฉ ูุฑูุถ ุฌุฏูุฏ โ ูุฃุฎุฐ ุฑูู **3** ุจุฏูุงู ูู **1**!

---

## ๐ฏ **ุงูุณุจุจ:**

### **ูู `App.tsx` - ุณุทุฑ 283-289 (ูุจู ุงูุฅุตูุงุญ):**

```typescript
const { data: patientsData, error: patientsError } = await supabase
  .from('patients')
  .select('queue_number')
  .eq('clinic_id', clinicId)
  .order('queue_number', { ascending: false })
  .limit(1); // โ ูุฌูุจ ุขุฎุฑ ุฑูู ูู ุฌููุน ุงููุฑุถู (ุจูุง ูููู ุงููุคุฑุดููู!)
```

**ุงููุดููุฉ:**
- ุงูููุฏ ูุฌูุจ ุขุฎุฑ `queue_number` ูู **ุฌููุน ุงููุฑุถู**
- **ุจูุง ูููู ุงููุคุฑุดููู!**
- ุงููุชูุฌุฉ: Queue Number ูุณุชูุฑ ูู ุงูุฒูุงุฏุฉ ุญุชู ุจุนุฏ ุงูุฃุฑุดูุฉ

---

## โ **ุงูุญู:**

### **ุฅุถุงูุฉ `.is('archive_date', null)` ูู auto-increment**

**ูู `App.tsx` - ุณุทุฑ 282-289:**

**ุจุนุฏ:**
```typescript
// Get max queue number for this clinic (ููุท ุงููุฑุถู ุบูุฑ ุงููุคุฑุดููู)
const { data: patientsData, error: patientsError } = await supabase
  .from('patients')
  .select('queue_number')
  .eq('clinic_id', clinicId)
  .is('archive_date', null) // โ ููุท ุงููุฑุถู ุบูุฑ ุงููุคุฑุดููู
  .order('queue_number', { ascending: false })
  .limit(1);
```

**ุงููุงุฆุฏุฉ:**
- `.is('archive_date', null)` ูุณุชุซูู ุงููุฑุถู ุงููุคุฑุดููู
- ูุฌูุจ ุขุฎุฑ ุฑูู ูู **ุงููุฑุถู ุงููุดุทูู ููุท**
- ุจุนุฏ ุงูุฃุฑุดูุฉุ ูุง ููุฌุฏ ูุฑุถู ูุดุทูู โ Queue Number ูุจุฏุฃ ูู **1**

---

## ๐งช **ุงุฎุชุจุงุฑ:**

### **ุงูุณููุงุฑูู 1: ุชุตููุฑ Queue Number ุจุนุฏ ุงูุฃุฑุดูุฉ**

1. ุณุฌู ุฏุฎูู ูู General Manager
2. ุงุฎุชุฑ ูุฑูุฒ ูุดุฑู
3. ุฃุถู ูุฑูุถ โ Queue Number = **1** โ
4. ุฃุถู ูุฑูุถ โ Queue Number = **2** โ
5. ุฃุถู ูุฑูุถ โ Queue Number = **3** โ
6. ุงุถุบุท ุฒุฑ ุงูุฃุฑุดูุฉ โ ุฃูุฏ
7. โ **Timeline ูุงุฑุบ**
8. ุงุถุบุท "ุฅุถุงูุฉ ูุฑูุถ"
9. โ **Queue Number = 1** (ุชู ุงูุชุตููุฑ!)

---

### **ุงูุณููุงุฑูู 2: Queue Number ูุณุชูุฑ ุฅุฐุง ูู ุชุชู ุงูุฃุฑุดูุฉ**

1. ุฃุถู ูุฑูุถ โ Queue Number = **1**
2. ุฃุถู ูุฑูุถ โ Queue Number = **2**
3. **ูุง ุชูู ุจุงูุฃุฑุดูุฉ**
4. ุงุถุบุท "ุฅุถุงูุฉ ูุฑูุถ"
5. โ **Queue Number = 3** (ูุณุชูุฑ ุจุดูู ุทุจูุนู)

---

### **ุงูุณููุงุฑูู 3: ุนุฒู Queue Number ุจูู ุงููุฑุงูุฒ**

1. ุงุฎุชุฑ ูุฑูุฒ ูุดุฑู
2. ุฃุถู ูุฑูุถ โ Queue Number = **1**
3. ุฃุถู ูุฑูุถ โ Queue Number = **2**
4. ุฃุฑุดู
5. ุงุฎุชุฑ ูุฑูุฒ ุญุทูู
6. ุฃุถู ูุฑูุถ โ Queue Number = **1** โ
7. โ **ูู ูุฑูุฒ ูู Queue Number ูุณุชูู**

---

## ๐ **ููุงุฑูุฉ:**

| ุงูุญุงูุฉ | ูุจู ุงูุฅุตูุงุญ | ุจุนุฏ ุงูุฅุตูุงุญ |
|--------|-------------|-------------|
| **ุจุนุฏ ุฃุฑุดูุฉ 3 ูุฑุถู** | Queue Number = 4 โ | Queue Number = 1 โ |
| **ุงููุฑุถู ุงููุคุฑุดููู** | ูุคุซุฑูู ุนูู ุงูุชุฑููู โ | ูุง ูุคุซุฑูู โ |
| **Timeline ูุงุฑุบ** | โ | โ |
| **Queue Number ูุจุฏุฃ ูู 1** | โ | โ |

---

## ๐ **ุงููููุงุช ุงููุนุฏูุฉ:**

### **`App.tsx`**
**ุงูุชุนุฏูู:** ุฅุถุงูุฉ `.is('archive_date', null)` ูู auto-increment

**ุงูุณุทุฑ:** 287

**ูุจู:**
```typescript
.eq('clinic_id', clinicId)
.order('queue_number', { ascending: false })
```

**ุจุนุฏ:**
```typescript
.eq('clinic_id', clinicId)
.is('archive_date', null) // โ ููุท ุงููุฑุถู ุบูุฑ ุงููุคุฑุดููู
.order('queue_number', { ascending: false })
```

---

## ๐ฏ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**

โ **Queue Number ูุชุตูุฑ ุชููุงุฆูุงู ุจุนุฏ ุงูุฃุฑุดูุฉ!**

1. โ **ุจุนุฏ ุงูุฃุฑุดูุฉ:** Queue Number ูุจุฏุฃ ูู **1**
2. โ **ุงููุฑุถู ุงููุคุฑุดููู:** ูุง ูุคุซุฑูู ุนูู ุงูุชุฑููู
3. โ **ุงูุนุฒู ุงููุงูู:** ูู ูุฑูุฒ ูู Queue Number ูุณุชูู
4. โ **Timeline ูุธูู:** ุฌุงูุฒ ููููู ุงูุฌุฏูุฏ

---

## ๐ **ุณูุฑ ุงูุนูู ุงููููู:**

**ููุงูุฉ ุงูููู:**
1. ุงููุฏูุฑ ุงูุนุงู ูุถุบุท ุฒุฑ "ุฃุฑุดูุฉ"
2. โ ุฌููุน ุงููุฑุถู ููููููู ููุฃุฑุดูู
3. โ Timeline ูุตุจุญ ูุงุฑุบุงู
4. โ Queue Number ูุชุตูุฑ

**ุจุฏุงูุฉ ุงูููู ุงูุชุงูู:**
1. ุฅุถุงูุฉ ูุฑูุถ ุฌุฏูุฏ
2. โ Queue Number ูุจุฏุฃ ูู **1**
3. โ ุตูุญุฉ ูุธููุฉ ููููุฃุฉ

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ! โ**
